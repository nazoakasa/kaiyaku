<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼šå“¡è§£ç´„ãƒšãƒ¼ã‚¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
        }
        .message {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        .btn-container {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            position: relative;
            min-height: 100px;
        }
        button {
            padding: 15px 40px;
            font-size: 16px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            position: relative;
        }
        .cancel-btn {
            background: #ff4757;
            color: white;
        }
        .stay-btn {
            background: #2ecc71;
            color: white;
        }
        .stay-btn:hover {
            background: #27ae60;
            transform: scale(1.05);
        }
        .emoji {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .progress {
            margin-top: 20px;
            font-size: 14px;
            color: #999;
        }
        .discount {
            background: #ffd93d;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            75% { transform: translateX(10px) rotate(5deg); }
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-30px); }
        }
        .fake-btn {
            position: absolute;
            padding: 15px 40px;
            font-size: 16px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            background: #ff4757;
            color: white;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="emoji" id="emoji">ğŸ˜Š</div>
        <h1 id="title">è§£ç´„æ‰‹ç¶šã</h1>
        <div class="message" id="message">
            æœ¬å½“ã«è§£ç´„ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹?
        </div>
        <div id="extra-content"></div>
        <div class="btn-container" id="btnContainer">
            <button class="stay-btn" id="stayBtn" onclick="stayWithUs()">ã‚„ã£ã±ã‚Šç¶šã‘ã‚‹</button>
            <button class="cancel-btn" id="cancelBtn" onclick="nextStep()">è§£ç´„ã™ã‚‹</button>
        </div>
        <div class="progress" id="progress">ã‚¹ãƒ†ãƒƒãƒ— 1/21</div>
    </div>

    <script>
        let step = 1;
        let dodgeCount = 0;
        let clickCount = 0;
        let escapeCount = 0;
        const steps = [
            { emoji: 'ğŸ˜Š', title: 'è§£ç´„æ‰‹ç¶šã', message: 'æœ¬å½“ã«è§£ç´„ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹?', trick: 'swap' },
            { emoji: 'ğŸ˜¢', title: 'ãŠå¾…ã¡ãã ã•ã„ï¼', message: 'ã“ã‚Œã¾ã§ä¸€ç·’ã«éã”ã—ãŸæ™‚é–“ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„...', trick: 'shrink' },
            { emoji: 'ğŸ', title: 'ç‰¹åˆ¥ã‚ªãƒ•ã‚¡ãƒ¼ï¼', message: 'ä»Šãªã‚‰50%ã‚ªãƒ•ã§ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ï¼', discount: '50% OFF', trick: 'move' },
            { emoji: 'ğŸ˜­', title: 'ã¾ã æ—©ã„ã§ã™ï¼', message: 'ç§ãŸã¡ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã¯ã€ã¾ã ä½¿ã£ã¦ã„ãªã„æ©Ÿèƒ½ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ï¼', trick: 'hide' },
            { emoji: 'ğŸ˜ˆ', title: 'æœ€å‡¶ãƒˆãƒ©ãƒƒãƒ—', message: 'ã‚¯ãƒªãƒƒã‚¯ã§ãã‚‹ã‹ãª...ï¼Ÿ', trick: 'clickEscape' },
            { emoji: 'ğŸ’', title: 'é™å®šç‰¹å…¸é€²å‘ˆ', message: 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡ã«ç„¡æ–™ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã„ãŸã—ã¾ã™ï¼', discount: 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç„¡æ–™', trick: 'doubleSwap' },
            { emoji: 'ğŸ¥º', title: 'ãŠé¡˜ã„ã—ã¾ã™...', message: 'ã‚ãªãŸãŒã„ãªããªã£ãŸã‚‰ã€ç§ãŸã¡ã¯ã¨ã¦ã‚‚å¯‚ã—ã„ã§ã™...', trick: 'tiny' },
            { emoji: 'ğŸ’°', title: 'æœ€çµ‚ã‚ªãƒ•ã‚¡ãƒ¼ï¼', message: '3ãƒ¶æœˆé–“å®Œå…¨ç„¡æ–™ã§ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ï¼', discount: '3ãƒ¶æœˆç„¡æ–™', trick: 'dodge' },
            { emoji: 'ğŸ†˜', title: 'ç·Šæ€¥äº‹æ…‹ï¼', message: 'ã‚ãªãŸã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã¯å¤§åˆ‡ãªãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ', trick: 'shake' },
            { emoji: 'ğŸŒŸ', title: 'ç‰¹åˆ¥VIPå¾…é‡', message: 'ä»Šã™ãVIPä¼šå“¡ã«ãªã£ã¦ã€ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’æ°¸ä¹…ã«ç„¡æ–™ã§ã”åˆ©ç”¨ãã ã•ã„ï¼', discount: 'VIPæ°¸ä¹…ç„¡æ–™', trick: 'invisible' },
            { emoji: 'ğŸ’”', title: 'æœ€å¾Œã®ãŠé¡˜ã„', message: 'ãã‚Œã§ã‚‚æœ¬å½“ã«è§£ç´„ã•ã‚Œã¾ã™ã‹...ï¼Ÿ', trick: 'spin' },
            { emoji: 'ğŸ¯', title: 'è¶…é™å®šã‚ªãƒ•ã‚¡ãƒ¼', message: 'ä»Šã ã‘å¹´é–“ãƒ—ãƒ©ãƒ³90%OFFï¼', discount: '90% OFF', trick: 'multipleButtons' },
            { emoji: 'ğŸ˜±', title: 'ã¡ã‚‡ã£ã¨å¾…ã£ã¦ï¼', message: 'ã¾ã ä¼ãˆã¦ã„ãªã„ç‰¹å…¸ãŒã‚ã‚Šã¾ã™ï¼', trick: 'moveAway' },
            { emoji: 'ğŸª', title: 'é©šãã®ç‰¹å…¸', message: 'å…¨æ©Ÿèƒ½ç„¡åˆ¶é™ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ï¼', discount: 'ç„¡åˆ¶é™ãƒ—ãƒ©ãƒ³', trick: 'fastMove' },
            { emoji: 'ğŸš€', title: 'ä¿¡ã˜ã‚‰ã‚Œãªã„ï¼', message: 'ã“ã‚Œä»¥ä¸Šã®æ¡ä»¶ã¯ã‚ã‚Šã¾ã›ã‚“ï¼', trick: 'superTiny' },
            { emoji: 'ğŸ’', title: 'æ„Ÿè¬ã®æ°—æŒã¡', message: 'ã‚ãªãŸã¯ç‰¹åˆ¥ãªãŠå®¢æ§˜ã§ã™', trick: 'hideAndSeek' },
            { emoji: 'ğŸ‰', title: 'ãƒ©ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¹', message: 'äººç”Ÿæœ€å¾Œã®ãƒãƒ£ãƒ³ã‚¹ã‹ã‚‚...', discount: 'å…¨éƒ¨ç„¡æ–™', trick: 'crazyMove' },
            { emoji: 'ğŸ˜‡', title: 'ç¥ã‚ªãƒ•ã‚¡ãƒ¼', message: 'ã‚‚ã¯ã‚„ç„¡æ–™ã‚’è¶…ãˆãŸä½•ã‹', trick: 'rotate' },
            { emoji: 'ğŸŒˆ', title: 'å¥‡è·¡ã®ææ¡ˆ', message: 'ä½¿ãˆã°ä½¿ã†ã»ã©ãƒã‚¤ãƒ³ãƒˆé‚„å…ƒï¼', trick: 'flash' },
            { emoji: 'â­', title: 'æœ€çµ‚å½¢æ…‹', message: 'ã“ã‚ŒãŒæœ€å¾Œã§ã™...æœ¬å½“ã«...', trick: 'chaos' },
            { emoji: 'ğŸ’«', title: 'ç©¶æ¥µã®é¸æŠ', message: 'å¾Œæ‚”ã—ã¾ã›ã‚“ã‹ï¼Ÿ', trick: 'ultimate' }
        ];

        const cancelBtn = document.getElementById('cancelBtn');
        const stayBtn = document.getElementById('stayBtn');
        const container = document.getElementById('btnContainer');

        function clearTricks() {
            cancelBtn.style = '';
            stayBtn.style = '';
            cancelBtn.onmouseenter = null;
            cancelBtn.onmousemove = null;
            cancelBtn.onmousedown = null;
            cancelBtn.onclick = () => nextStep();
            container.style = '';
            document.querySelectorAll('.fake-btn').forEach(btn => btn.remove());
            dodgeCount = 0;
            clickCount = 0;
            escapeCount = 0;
        }

        function applyTrick(trick) {
            clearTricks();
            
            switch(trick) {
                case 'swap':
                    container.style.flexDirection = 'row-reverse';
                    break;
                
                case 'shrink':
                    cancelBtn.style.padding = '5px 10px';
                    cancelBtn.style.fontSize = '10px';
                    stayBtn.style.padding = '20px 60px';
                    stayBtn.style.fontSize = '20px';
                    break;
                
                case 'move':
                    cancelBtn.onmouseenter = () => {
                        const x = Math.random() * 300 - 150;
                        const y = Math.random() * 150 - 75;
                        cancelBtn.style.transform = `translate(${x}px, ${y}px)`;
                    };
                    break;
                
                case 'hide':
                    cancelBtn.style.opacity = '0.05';
                    cancelBtn.onmouseenter = () => cancelBtn.style.opacity = '0.2';
                    cancelBtn.onmouseleave = () => cancelBtn.style.opacity = '0.05';
                    break;
                
                case 'clickEscape':
                    // ã‚¯ãƒªãƒƒã‚¯ã—ã‚ˆã†ã¨ã™ã‚‹ã¨3å›é€ƒã’ã¦ã€3å›ç›®ã§å…¥ã‚Œæ›¿ã‚ã‚‹
                    cancelBtn.onmousedown = (e) => {
                        if (escapeCount < 2) {
                            e.preventDefault();
                            const x = (escapeCount + 1) * 150 * (Math.random() > 0.5 ? 1 : -1);
                            const y = (escapeCount + 1) * 80 * (Math.random() > 0.5 ? 1 : -1);
                            cancelBtn.style.transform = `translate(${x}px, ${y}px)`;
                            cancelBtn.style.position = 'absolute';
                            escapeCount++;
                            
                            // ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
                            cancelBtn.style.transition = 'transform 0.2s ease-out';
                            setTimeout(() => {
                                cancelBtn.style.transition = 'all 0.3s';
                            }, 200);
                            
                            return false;
                        } else if (escapeCount === 2) {
                            // 3å›ç›®ï¼šãƒœã‚¿ãƒ³ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ï¼
                            e.preventDefault();
                            container.style.flexDirection = container.style.flexDirection === 'row-reverse' ? 'row' : 'row-reverse';
                            cancelBtn.style.transform = '';
                            cancelBtn.style.position = 'relative';
                            cancelBtn.style.background = '#ff0000';
                            cancelBtn.textContent = 'è§£ç´„ã™ã‚‹ï¼ˆæœ¬ç‰©ï¼‰';
                            stayBtn.style.background = '#ff4757';
                            stayBtn.textContent = 'ã“ã‚Œã¯è§£ç´„ãƒœã‚¿ãƒ³';
                            escapeCount++;
                            return false;
                        }
                    };
                    cancelBtn.style.cursor = 'pointer';
                    break;
                
                case 'doubleSwap':
                    container.style.flexDirection = 'row-reverse';
                    cancelBtn.style.padding = '8px 15px';
                    cancelBtn.style.fontSize = '12px';
                    break;
                
                case 'tiny':
                    cancelBtn.style.padding = '2px 4px';
                    cancelBtn.style.fontSize = '6px';
                    stayBtn.style.padding = '30px 100px';
                    stayBtn.style.fontSize = '28px';
                    break;
                
                case 'dodge':
                    cancelBtn.onmousemove = (e) => {
                        if (dodgeCount < 5) {
                            const x = Math.random() * 400 - 200;
                            const y = Math.random() * 200 - 100;
                            cancelBtn.style.transform = `translate(${x}px, ${y}px)`;
                            cancelBtn.style.position = 'absolute';
                            dodgeCount++;
                        }
                    };
                    break;
                
                case 'shake':
                    cancelBtn.style.animation = 'shake 0.3s infinite';
                    cancelBtn.style.fontSize = '10px';
                    break;
                
                case 'invisible':
                    cancelBtn.style.background = '#fefefe';
                    cancelBtn.style.color = '#fafafa';
                    cancelBtn.style.border = '1px solid #f9f9f9';
                    cancelBtn.style.padding = '3px 6px';
                    cancelBtn.style.fontSize = '7px';
                    break;
                
                case 'spin':
                    cancelBtn.style.animation = 'spin 2s linear infinite';
                    container.style.flexDirection = 'row-reverse';
                    break;
                
                case 'multipleButtons':
                    for (let i = 0; i < 5; i++) {
                        const fake = document.createElement('button');
                        fake.className = 'fake-btn';
                        fake.textContent = 'è§£ç´„ã™ã‚‹';
                        fake.style.left = `${Math.random() * 80}%`;
                        fake.style.top = `${Math.random() * 50}px`;
                        fake.onclick = () => fake.remove();
                        container.appendChild(fake);
                    }
                    cancelBtn.style.padding = '5px 10px';
                    cancelBtn.style.fontSize = '9px';
                    break;
                
                case 'moveAway':
                    cancelBtn.onmousemove = () => {
                        const x = Math.random() * 500 - 250;
                        const y = Math.random() * 300 - 150;
                        cancelBtn.style.transform = `translate(${x}px, ${y}px)`;
                        cancelBtn.style.position = 'absolute';
                    };
                    cancelBtn.style.padding = '4px 8px';
                    cancelBtn.style.fontSize = '8px';
                    break;
                
                case 'fastMove':
                    cancelBtn.style.animation = 'float 0.5s infinite';
                    cancelBtn.onmouseenter = () => {
                        const x = Math.random() * 600 - 300;
                        const y = Math.random() * 400 - 200;
                        cancelBtn.style.transform = `translate(${x}px, ${y}px)`;
                        cancelBtn.style.position = 'absolute';
                    };
                    break;
                
                case 'superTiny':
                    cancelBtn.style.padding = '1px 2px';
                    cancelBtn.style.fontSize = '4px';
                    cancelBtn.style.opacity = '0.3';
                    container.style.flexDirection = 'row-reverse';
                    break;
                
                case 'hideAndSeek':
                    let blinkInterval = setInterval(() => {
                        cancelBtn.style.opacity = cancelBtn.style.opacity === '0.1' ? '1' : '0.1';
                    }, 600);
                    cancelBtn.onclick = () => {
                        clearInterval(blinkInterval);
                        nextStep();
                    };
                    cancelBtn.style.padding = '10px 20px';
                    cancelBtn.style.fontSize = '14px';
                    break;
                
                case 'crazyMove':
                    let moveInterval = setInterval(() => {
                        const x = Math.random() * 400 - 200;
                        const y = Math.random() * 200 - 100;
                        cancelBtn.style.transform = `translate(${x}px, ${y}px)`;
                        cancelBtn.style.position = 'absolute';
                    }, 800);
                    cancelBtn.onclick = () => {
                        clearInterval(moveInterval);
                        nextStep();
                    };
                    cancelBtn.style.padding = '8px 15px';
                    cancelBtn.style.fontSize = '12px';
                    break;
                
                case 'rotate':
                    cancelBtn.style.animation = 'spin 1s linear infinite';
                    cancelBtn.style.padding = '4px 7px';
                    cancelBtn.style.fontSize = '7px';
                    cancelBtn.style.opacity = '0.4';
                    container.style.flexDirection = 'row-reverse';
                    break;
                
                case 'flash':
                    setInterval(() => {
                        cancelBtn.style.display = cancelBtn.style.display === 'none' ? 'block' : 'none';
                    }, 200);
                    break;
                
                case 'chaos':
                    // å½ãƒœã‚¿ãƒ³ã¯5å€‹ã«æ¸›ã‚‰ã™
                    for (let i = 0; i < 5; i++) {
                        const fake = document.createElement('button');
                        fake.className = 'fake-btn';
                        fake.textContent = 'è§£ç´„';
                        fake.style.left = `${Math.random() * 90}%`;
                        fake.style.top = `${Math.random() * 80}px`;
                        fake.style.padding = '8px 12px';
                        fake.style.fontSize = '12px';
                        fake.onclick = () => fake.remove();
                        container.appendChild(fake);
                    }
                    cancelBtn.style.padding = '8px 12px';
                    cancelBtn.style.fontSize = '12px';
                    cancelBtn.style.opacity = '0.8';
                    break;
                
                case 'ultimate':
                    // æœ€çµ‚å½¢æ…‹ï¼š3å›é¿ã‘ã¦ã‹ã‚‰æ•ã¾ãˆã‚‹
                    cancelBtn.onmousemove = (e) => {
                        if (dodgeCount < 3) {
                            const x = Math.random() * 400 - 200;
                            const y = Math.random() * 200 - 100;
                            cancelBtn.style.transform = `translate(${x}px, ${y}px)`;
                            cancelBtn.style.position = 'absolute';
                            dodgeCount++;
                        } else {
                            // 3å›é¿ã‘ãŸã‚‰æ•ã¾ãˆã‚„ã™ãã™ã‚‹
                            cancelBtn.style.padding = '10px 20px';
                            cancelBtn.style.fontSize = '14px';
                            cancelBtn.style.opacity = '1';
                            cancelBtn.style.background = '#ff4757';
                            cancelBtn.onmousemove = null;
                        }
                    };
                    cancelBtn.style.padding = '5px 10px';
                    cancelBtn.style.fontSize = '10px';
                    cancelBtn.style.opacity = '0.6';
                    container.style.flexDirection = 'row-reverse';
                    break;
            }
        }

        function nextStep() {
            if (step >= 21) {
                clearTricks();
                document.getElementById('emoji').textContent = 'ğŸ˜­';
                document.getElementById('title').textContent = 'è§£ç´„å®Œäº†...';
                document.getElementById('message').textContent = 'ã‚ˆãã“ã“ã¾ã§è¾¿ã‚Šç€ãã¾ã—ãŸ...æœ¬å½“ã«ãŠç–²ã‚Œæ§˜ã§ã—ãŸ...';
                document.getElementById('extra-content').innerHTML = '';
                container.style.display = 'none';
                document.getElementById('progress').textContent = 'è§£ç´„å‡¦ç†å®Œäº†';
                return;
            }

            const currentStep = steps[step];
            document.getElementById('emoji').textContent = currentStep.emoji;
            document.getElementById('title').textContent = currentStep.title;
            document.getElementById('message').textContent = currentStep.message;
            
            if (currentStep.discount) {
                document.getElementById('extra-content').innerHTML = 
                    `<div class="discount">${currentStep.discount}</div>`;
            } else {
                document.getElementById('extra-content').innerHTML = '';
            }

            applyTrick(currentStep.trick);

            step++;
            document.getElementById('progress').textContent = `ã‚¹ãƒ†ãƒƒãƒ— ${step}/21`;
        }

        function stayWithUs() {
            clearTricks();
            document.getElementById('emoji').textContent = 'ğŸ‰';
            document.getElementById('title').textContent = 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼';
            document.getElementById('message').textContent = 'å¼•ãç¶šãã”åˆ©ç”¨ã„ãŸã ã‘ã‚‹ã“ã¨ã‚’å¬‰ã—ãæ€ã„ã¾ã™ï¼ç´ æ™´ã‚‰ã—ã„é¸æŠã§ã™ï¼';
            document.getElementById('extra-content').innerHTML = '';
            document.querySelector('.btn-container').style.display = 'none';
            document.getElementById('progress').textContent = 'ç¶™ç¶šæ±ºå®šï¼';
        }
    </script>
</body>
</html>